/* ---------- NOTE ----------
The comments were generated by AI to save time on writing them manually.
  ---------- NOTE ---------- */

// Constants for display styles and messages
// ثوابت لأنماط العرض والرسائل
const DISPLAY_BLOCK = "block"; // عرض العنصر
const DISPLAY_NONE = "none"; // إخفاء العنصر
const ZAKAT_NOT_REQUIRED_MESSAGE = "هذا العدد لا تجب فيه الزكاة."; // رسالة في حالة عدم وجوب الزكاة
const ZAKAT_RATE = 0.025; // نسبة الزكاة (2.5%)

window.onload = () => {
  // Assign elements
  // تحديد العناصر المستخدمة في الصفحة
  const primaryInput = document.getElementById("mainInput"); // حقل إدخال الرقم الأساسي
  const primaryButton = document.getElementById("mainButton"); // الزر الرئيسي لاحتساب الزكاة
  const tableShow = document.getElementById("finalResult"); // العنصر الذي يعرض النتيجة النهائية
  const inputedAmount = document.getElementById("sendNumber"); // العنصر الذي يعرض الرقم المدخل
  const finalAmount = document.getElementById("amount"); // العنصر الذي يعرض مبلغ الزكاة
  const wrongMessage = document.getElementById("wrong"); // العنصر الذي يعرض رسالة الخطأ

  // Clear inputs and hide elements on page load
  // تفريغ الحقول وإخفاء العناصر عند تحميل الصفحة
  const allInputs = document.querySelectorAll("input"); // تحديد جميع الحقول من النوع إدخال
  allInputs.forEach((input) => {
    input.value = ""; // تفريغ محتوى الحقول
  });
  tableShow.style.display = DISPLAY_NONE; // إخفاء جدول النتيجة
  wrongMessage.style.display = DISPLAY_NONE; // إخفاء رسالة الخطأ

  // Function to handle Zakat calculation
  // دالة لحساب الزكاة ومعالجة المدخلات
  const mainFunction = () => {
    const zakatInput = primaryInput.value.trim(); // إزالة المسافات الزائدة من المدخل
    const zakatAmount = parseFloat(zakatInput); // تحويل القيمة إلى رقم عشري

    // Validate input
    // التحقق من صحة المدخل
    if (
      !isNaN(zakatAmount) && // التأكد من أن المدخل رقم وليس نصًا
      zakatAmount > 0 && // التأكد من أن الرقم موجب وأكبر من صفر
      !zakatInput.includes("e") && // منع إدخال الصيغ العلمية (مثل 1e5)
      !zakatInput.includes("-") // منع الأرقام السالبة
    ) {
      inputedAmount.innerText = zakatAmount; // عرض الرقم المدخل
      const calculatedZakat = zakatAmount * ZAKAT_RATE; // حساب مبلغ الزكاة
      finalAmount.innerText = calculatedZakat.toFixed(2); // تقريب الناتج إلى منزلتين عشريتين

      // Show result and hide error message
      // إظهار النتيجة وإخفاء رسالة الخطأ
      tableShow.style.display = DISPLAY_BLOCK; // عرض الجدول الذي يحتوي على النتيجة
      wrongMessage.style.display = DISPLAY_NONE; // إخفاء رسالة الخطأ
    } else {
      // Show error message and hide result
      // إظهار رسالة الخطأ وإخفاء النتيجة
      wrongMessage.innerText = ZAKAT_NOT_REQUIRED_MESSAGE; // تخصيص رسالة الخطأ
      wrongMessage.style.display = DISPLAY_BLOCK; // عرض رسالة الخطأ
      tableShow.style.display = DISPLAY_NONE; // إخفاء الجدول
    }
  };

  // Add click event listener to the button
  // إضافة مستمع للزر عند النقر لتنفيذ العملية
  primaryButton.addEventListener("click", (e) => {
    e.preventDefault(); // منع السلوك الافتراضي للزر (مثل إعادة تحميل الصفحة)
    mainFunction(); // استدعاء الدالة الرئيسية لحساب الزكاة
  });
};
